{"ast":null,"code":"import axios from 'axios';\nimport io from 'socket.io-client';\nimport setAuthToken from '../utils/setAuthToken';\nimport { useSelector } from 'react-redux';\nimport { CREATE_STREAM, JOIN_STREAM, GET_STREAM, SEND_MESSAGE, CHOOSE_STREAM, DELETE_STREAM, UPDATE_STREAM, LOGIN, REGISTER } from '../types';\nconst socket = io('https://collab-bin.herokuapp.com');\nconst user = useSelector(state => state.auth.user); // Auth actions\n\nexport const login = async formData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  const res = await axios.post('https://collab-bin.herokuapp.com/auth/login', formData, config);\n  console.log(res.data);\n  getUser();\n  return {\n    type: LOGIN,\n    payload: res.data\n  };\n};\nexport const register = async formData => {\n  console.log('state', formData);\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  const res = await axios.post('https://collab-bin.herokuapp.com/auth/register', formData, config);\n  console.log(res.data);\n  return {\n    type: REGISTER,\n    payload: formData\n  };\n};\nexport const getUser = async () => {\n  setAuthToken(localStorage.token);\n  console.log('getUser');\n  const res = await axios.get('https://collab-bin.herokuapp.com/auth/getUser');\n  console.log('[get-user]', res.data);\n\n  if (res.data) {\n    return {\n      type: 'SET_USER',\n      payload: res.data\n    };\n  } else {\n    return {\n      type: 'ERROR_USER'\n    };\n  }\n}; // Stream actions\n\nsocket.on('new message', data => {\n  renderMessages(data);\n});\nexport const renderMessages = data => {\n  return {\n    type: 'RENDER_MESSAGES',\n    payload: data\n  };\n};\nexport const getStream = async () => {\n  if (user) {\n    const res = await axios.get(`https://collab-bin.herokuapp.com/streams/${user._id}`);\n    return {\n      type: GET_STREAM,\n      payload: res.data\n    };\n  }\n};\nexport const resetCurrent = async data => {\n  console.log(data);\n  return {\n    type: 'SET_CURRENT',\n    payload: data\n  };\n};\nexport const selectStream = stream => {\n  return {\n    type: CHOOSE_STREAM,\n    payload: stream\n  };\n};\nexport const sendMessage = async obj => {\n  if (user) {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      formData,\n      current\n    } = obj;\n    formData.sender_id = user._id;\n    formData.sender_name = user.name;\n    console.log(formData);\n    await axios.post('https://collab-bin.herokuapp.com/streams/send', formData, config);\n    return {\n      type: SEND_MESSAGE,\n      payload: obj\n    };\n  }\n};\nexport const createStream = async title => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (user) {\n    const formData = {\n      title: title.title,\n      owner_id: user._id,\n      owner_name: user.name\n    };\n    const res = await axios.post('https://collab-bin.herokuapp.com/streams/create', formData, config);\n    return {\n      type: CREATE_STREAM,\n      payload: formData\n    };\n  }\n};\nexport const deleteStream = formData => {\n  return {\n    type: DELETE_STREAM,\n    payload: formData\n  };\n};\nexport const updateStream = formData => {\n  return {\n    type: UPDATE_STREAM,\n    payload: formData\n  };\n};\nexport const joinStream = async link => {\n  const url = `https://collab-bin.herokuapp.com/streams/join/${link}/${user._id}`;\n  const res = await axios.get(url);\n  console.log(res.data.newStream);\n  return {\n    type: JOIN_STREAM,\n    payload: res.data.newStream\n  };\n};","map":{"version":3,"sources":["/home/mah-nigga/React/ChatApp/client/src/actions/index.js"],"names":["axios","io","setAuthToken","useSelector","CREATE_STREAM","JOIN_STREAM","GET_STREAM","SEND_MESSAGE","CHOOSE_STREAM","DELETE_STREAM","UPDATE_STREAM","LOGIN","REGISTER","socket","user","state","auth","login","formData","config","headers","res","post","console","log","data","getUser","type","payload","register","localStorage","token","get","on","renderMessages","getStream","_id","resetCurrent","selectStream","stream","sendMessage","obj","current","sender_id","sender_name","name","createStream","title","owner_id","owner_name","deleteStream","updateStream","joinStream","link","url","newStream"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport io from 'socket.io-client'\nimport setAuthToken from '../utils/setAuthToken'\nimport { useSelector } from 'react-redux'\nimport {\n  CREATE_STREAM,\n  JOIN_STREAM,\n  GET_STREAM,\n  SEND_MESSAGE,\n  CHOOSE_STREAM,\n  DELETE_STREAM,\n  UPDATE_STREAM,\n\n  LOGIN,\n  REGISTER\n} from '../types'\n\nconst socket = io('https://collab-bin.herokuapp.com')\nconst user = useSelector(state => state.auth.user)\n\n// Auth actions\nexport const login = async formData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  const res = await axios.post('https://collab-bin.herokuapp.com/auth/login', formData, config)\n  console.log(res.data)\n  getUser()\n  return {\n    type: LOGIN,\n    payload: res.data\n  }\n}\n\nexport const register = async formData => {\n  console.log('state', formData)\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    }\n  }\n  const res = await axios.post('https://collab-bin.herokuapp.com/auth/register', formData, config)\n  console.log(res.data)\n  return {\n    type: REGISTER,\n    payload: formData\n  }\n}\n\nexport const getUser = async () => {\n  setAuthToken(localStorage.token)\n  console.log('getUser')\n  const res = await axios.get('https://collab-bin.herokuapp.com/auth/getUser')\n  console.log('[get-user]', res.data)\n  if (res.data) {\n    return {\n      type: 'SET_USER',\n      payload: res.data\n    }\n  } else {\n    return {\n      type: 'ERROR_USER'\n    }\n  }\n}\n\n// Stream actions\nsocket.on('new message', data => {\n  renderMessages(data)\n})\n\nexport const renderMessages = data => {\n  return {\n    type: 'RENDER_MESSAGES',\n    payload: data\n  } \n}\n\nexport const getStream = async () => {\n  if (user) {\n    const res = await axios.get(`https://collab-bin.herokuapp.com/streams/${user._id}`)\n    return {\n      type: GET_STREAM,\n      payload: res.data\n    } \n  }\n}\n\nexport const resetCurrent = async data => {\n  console.log(data)\n  return {\n    type: 'SET_CURRENT',\n    payload: data\n  } \n}\n\nexport const selectStream = stream => {\n  return {\n    type: CHOOSE_STREAM,\n    payload: stream\n  } \n}\n\nexport const sendMessage = async obj => {\n  if (user) {\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n    const { formData, current } = obj\n    formData.sender_id = user._id\n    formData.sender_name = user.name\n    console.log(formData)\n\n    await axios.post('https://collab-bin.herokuapp.com/streams/send', formData, config)\n\n    return {\n      type: SEND_MESSAGE,\n      payload: obj\n    }\n  }\n}\n\nexport const createStream = async title => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }\n  if (user) {\n    const formData = {\n      title: title.title,\n      owner_id: user._id,\n      owner_name: user.name\n    }\n    const res = await axios.post('https://collab-bin.herokuapp.com/streams/create', formData, config)\n    return {\n      type: CREATE_STREAM,\n      payload: formData\n    }\n  }\n}\n\nexport const deleteStream = formData => {\n  return {\n    type: DELETE_STREAM,\n    payload: formData\n  }\n}\n\nexport const updateStream = formData => {\n  return {\n    type: UPDATE_STREAM,\n    payload: formData\n  }\n}\n\nexport const joinStream = async link => {\n  const url = `https://collab-bin.herokuapp.com/streams/join/${link}/${user._id}`\n  const res = await axios.get(url)\n  console.log(res.data.newStream)\n  return {\n    type: JOIN_STREAM,\n    payload: res.data.newStream\n  }\n}\n"]},"metadata":{},"sourceType":"module"}