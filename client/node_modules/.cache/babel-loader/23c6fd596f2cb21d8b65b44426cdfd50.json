{"ast":null,"code":"import axios from 'axios';\nimport io from 'socket.io-client';\nimport setAuthToken from '../utils/setAuthToken';\nimport { useSelector } from 'react-redux';\nimport store from '../store';\nimport { CREATE_STREAM, JOIN_STREAM, GET_STREAM, SEND_MESSAGE, CHOOSE_STREAM, DELETE_STREAM, UPDATE_STREAM, LOGIN, REGISTER } from '../context/types';\nconst socket = io('https://collab-bin.herokuapp.com');\nconst user = store.getState().auth.user; // Auth actions\n\nexport const login = formData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  axios.post('https://collab-bin.herokuapp.com/auth/login', formData, config).then(res => {\n    console.log(res.data);\n    getUser();\n    return {\n      type: LOGIN,\n      payload: res.data\n    };\n  });\n};\nexport const register = formData => {\n  console.log('state', formData);\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  axios.post('https://collab-bin.herokuapp.com/auth/register', formData, config).then(res => {\n    console.log(res.data);\n    return {\n      type: REGISTER,\n      payload: formData\n    };\n  });\n};\nexport const getUser = () => (dispatch, getState) => {\n  setAuthToken(localStorage.token);\n  axios.get('https://collab-bin.herokuapp.com/auth/getUser').then(res => {\n    if (res.data) {\n      console.log('[action]', res.data);\n      return {\n        type: 'SET_USER',\n        payload: res.data\n      };\n    } else {\n      return {\n        type: 'ERROR_USER'\n      };\n    }\n  });\n}; // Stream actions\n\nsocket.on('new message', data => {\n  renderMessages(data);\n});\nexport const renderMessages = data => {\n  return {\n    type: 'RENDER_MESSAGES',\n    payload: data\n  };\n};\nexport const getStream = () => {\n  if (user) {\n    axios.get(`https://collab-bin.herokuapp.com/streams/${user._id}`).then(res => {\n      return {\n        type: GET_STREAM,\n        payload: res.data\n      };\n    });\n  }\n};\nexport const resetCurrent = async data => {\n  console.log(data);\n  return {\n    type: 'SET_CURRENT',\n    payload: data\n  };\n};\nexport const selectStream = stream => {\n  return {\n    type: CHOOSE_STREAM,\n    payload: stream\n  };\n};\nexport const sendMessage = obj => {\n  if (user) {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      formData,\n      current\n    } = obj;\n    formData.sender_id = user._id;\n    formData.sender_name = user.name;\n    console.log(formData);\n    axios.post('https://collab-bin.herokuapp.com/streams/send', formData, config).then(res => {\n      return {\n        type: SEND_MESSAGE,\n        payload: obj\n      };\n    });\n  }\n};\nexport const createStream = title => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (user) {\n    const formData = {\n      title: title.title,\n      owner_id: user._id,\n      owner_name: user.name\n    };\n    axios.post('https://collab-bin.herokuapp.com/streams/create', formData, config).then(res => {\n      return {\n        type: CREATE_STREAM,\n        payload: formData\n      };\n    });\n  }\n};\nexport const deleteStream = formData => {\n  return {\n    type: DELETE_STREAM,\n    payload: formData\n  };\n};\nexport const updateStream = formData => {\n  return {\n    type: UPDATE_STREAM,\n    payload: formData\n  };\n};\nexport const joinStream = link => {\n  const url = `https://collab-bin.herokuapp.com/streams/join/${link}/${user._id}`;\n  axios.get(url).then(res => {\n    return {\n      type: JOIN_STREAM,\n      payload: res.data.newStream\n    };\n  });\n};","map":{"version":3,"sources":["/home/mah-nigga/React/ChatApp/client/src/actions/index.js"],"names":["axios","io","setAuthToken","useSelector","store","CREATE_STREAM","JOIN_STREAM","GET_STREAM","SEND_MESSAGE","CHOOSE_STREAM","DELETE_STREAM","UPDATE_STREAM","LOGIN","REGISTER","socket","user","getState","auth","login","formData","config","headers","post","then","res","console","log","data","getUser","type","payload","register","dispatch","localStorage","token","get","on","renderMessages","getStream","_id","resetCurrent","selectStream","stream","sendMessage","obj","current","sender_id","sender_name","name","createStream","title","owner_id","owner_name","deleteStream","updateStream","joinStream","link","url","newStream"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport io from 'socket.io-client'\nimport setAuthToken from '../utils/setAuthToken'\nimport { useSelector } from 'react-redux'\nimport store from '../store'\n\nimport {\n  CREATE_STREAM,\n  JOIN_STREAM,\n  GET_STREAM,\n  SEND_MESSAGE,\n  CHOOSE_STREAM,\n  DELETE_STREAM,\n  UPDATE_STREAM,\n\n  LOGIN,\n  REGISTER\n} from '../context/types'\n\nconst socket = io('https://collab-bin.herokuapp.com')\nconst user = store.getState().auth.user\n\n// Auth actions\nexport const login = formData => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }\n  axios.post('https://collab-bin.herokuapp.com/auth/login', formData, config).then(res => {\n    console.log(res.data)\n    getUser()\n    return {\n      type: LOGIN,\n      payload: res.data\n    }\n  })\n  \n}\n\nexport const register = formData => {\n  console.log('state', formData)\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    }\n  }\n  axios.post('https://collab-bin.herokuapp.com/auth/register', formData, config).then(res => {\n    console.log(res.data)\n    return {\n      type: REGISTER,\n      payload: formData\n    }\n  })\n  \n}\n\nexport const getUser = () => (dispatch, getState) => {\n    setAuthToken(localStorage.token)\n    axios.get('https://collab-bin.herokuapp.com/auth/getUser').then(res => {\n      if (res.data) {\n        console.log('[action]', res.data)\n        return {\n          type: 'SET_USER',\n          payload: res.data\n        }\n      } else {\n        return {\n          type: 'ERROR_USER'\n        }\n      }\n    }) \n}\n\n// Stream actions\nsocket.on('new message', data => {\n  renderMessages(data)\n})\n\nexport const renderMessages = data => {\n  return {\n    type: 'RENDER_MESSAGES',\n    payload: data\n  } \n}\n\nexport const getStream = () => {\n  if (user) {\n    axios.get(`https://collab-bin.herokuapp.com/streams/${user._id}`).then(res => {\n      return {\n        type: GET_STREAM,\n        payload: res.data\n      } \n    })\n  }\n}\n\nexport const resetCurrent = async data => {\n  console.log(data)\n  return {\n    type: 'SET_CURRENT',\n    payload: data\n  } \n}\n\nexport const selectStream = stream => {\n  return {\n    type: CHOOSE_STREAM,\n    payload: stream\n  } \n}\n\nexport const sendMessage = obj => {\n  \n\n  if (user) {\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n    const { formData, current } = obj\n    formData.sender_id = user._id\n    formData.sender_name = user.name\n    console.log(formData)\n\n   axios.post('https://collab-bin.herokuapp.com/streams/send', formData, config).then(res => {\n    return {\n      type: SEND_MESSAGE,\n      payload: obj\n    }\n   })\n  }\n}\n\nexport const createStream = title => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }\n  \n  if (user) {\n    const formData = {\n      title: title.title,\n      owner_id: user._id,\n      owner_name: user.name\n    }\n    axios.post('https://collab-bin.herokuapp.com/streams/create', formData, config).then(res => {\n      return {\n        type: CREATE_STREAM,\n        payload: formData\n      }\n    })\n    \n  }\n}\n\nexport const deleteStream = formData => {\n  return {\n    type: DELETE_STREAM,\n    payload: formData\n  }\n}\n\nexport const updateStream = formData => {\n  return {\n    type: UPDATE_STREAM,\n    payload: formData\n  }\n}\n\nexport const joinStream = link => {\n  const url = `https://collab-bin.herokuapp.com/streams/join/${link}/${user._id}`\n  axios.get(url).then(res => {\n    return {\n      type: JOIN_STREAM,\n      payload: res.data.newStream\n    }\n  })\n}\n"]},"metadata":{},"sourceType":"module"}