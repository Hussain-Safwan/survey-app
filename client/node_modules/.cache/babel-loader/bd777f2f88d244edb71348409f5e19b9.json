{"ast":null,"code":"var _jsxFileName = \"/home/mah-nigga/React/ChatApp/client/src/context/streams/StreamState.js\";\nimport React, { useReducer, useContext } from 'react';\nimport StreamReducer from './StreamReducer';\nimport StreamContext from './StreamContext';\nimport setAuthToken from '../../utils/setAuthToken';\nimport AuthContext from '../auth/AuthContext';\nimport axios from 'axios';\nimport { CREATE_STREAM, JOIN_STREAM, GET_STREAM, SEND_MESSAGE, CHOOSE_STREAM, DELETE_STREAM, UPDATE_STREAM } from '../types';\n\nconst StreamState = props => {\n  const initialState = {\n    current: null,\n    streams: [// {\n      //   id: 1,\n      //   title: 'With the buddiez'\n      // },\n      // {\n      //   id: 2,\n      //   title: 'Ma home Bois'\n      // },\n      // {\n      //   id: 3,\n      //   title: 'Univ NiggaZ'\n      // },\n      // {\n      //   id: 4,\n      //   title: 'bad shitty creepZ'\n      // }\n    ],\n    messages: [{\n      id: 1,\n      sender: 'other',\n      text: 'hey there buddz'\n    }, {\n      id: 2,\n      sender: 'me',\n      text: 'brooh, been where??'\n    }, {\n      id: 3,\n      sender: 'other',\n      text: 'lundun bro'\n    }, {\n      id: 4,\n      sender: 'me',\n      text: 'welcome back, buddz'\n    }]\n  };\n  const [state, dispatch] = useReducer(StreamReducer, initialState);\n  const authContext = useContext(AuthContext);\n  const {\n    user\n  } = authContext;\n\n  const getStream = async () => {\n    if (user) {\n      const res = await axios.get(`http://localhost:5000/streams/${user._id}`);\n      console.log('[get-stream]', res.data);\n      dispatch({\n        type: GET_STREAM,\n        payload: res.data\n      });\n    }\n  };\n\n  const selectStream = stream => {\n    dispatch({\n      type: CHOOSE_STREAM,\n      payload: stream\n    });\n  };\n\n  const sendMessage = formData => {\n    dispatch({\n      type: SEND_MESSAGE,\n      payload: formData\n    });\n  };\n\n  const createStream = async title => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    if (user) {\n      const formData = {\n        title: title.title,\n        owner_id: user._id,\n        owner_name: user.name\n      };\n      console.log('[create stream]', formData);\n      const res = await axios.post('http://localhost:5000/streams/create', formData, config);\n      dispatch({\n        type: CREATE_STREAM,\n        payload: formData\n      });\n    }\n  };\n\n  const deleteStream = formData => {\n    dispatch({\n      type: DELETE_STREAM,\n      payload: formData\n    });\n  };\n\n  const updateStream = formData => {\n    dispatch({\n      type: UPDATE_STREAM,\n      payload: formData\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(StreamContext.Provider, {\n    value: {\n      streams: state.streams,\n      messages: state.messages,\n      current: state.current,\n      getStream,\n      sendMessage,\n      selectStream,\n      createStream,\n      deleteStream,\n      updateStream\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default StreamState;","map":{"version":3,"sources":["/home/mah-nigga/React/ChatApp/client/src/context/streams/StreamState.js"],"names":["React","useReducer","useContext","StreamReducer","StreamContext","setAuthToken","AuthContext","axios","CREATE_STREAM","JOIN_STREAM","GET_STREAM","SEND_MESSAGE","CHOOSE_STREAM","DELETE_STREAM","UPDATE_STREAM","StreamState","props","initialState","current","streams","messages","id","sender","text","state","dispatch","authContext","user","getStream","res","get","_id","console","log","data","type","payload","selectStream","stream","sendMessage","formData","createStream","title","config","headers","owner_id","owner_name","name","post","deleteStream","updateStream","children"],"mappings":"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","sourcesContent":["import React, { useReducer, useContext } from 'react'\nimport StreamReducer from './StreamReducer'\nimport StreamContext from './StreamContext'\nimport setAuthToken from '../../utils/setAuthToken'\nimport AuthContext from '../auth/AuthContext'\n\nimport axios from 'axios'\n\nimport {\n  CREATE_STREAM,\n  JOIN_STREAM,\n  GET_STREAM,\n  SEND_MESSAGE,\n  CHOOSE_STREAM,\n  DELETE_STREAM,\n  UPDATE_STREAM\n} from '../types'\n\nconst StreamState = props => {\n  const initialState = {\n    current: null,\n    streams: [\n      // {\n      //   id: 1,\n      //   title: 'With the buddiez'\n      // },\n      // {\n      //   id: 2,\n      //   title: 'Ma home Bois'\n      // },\n      // {\n      //   id: 3,\n      //   title: 'Univ NiggaZ'\n      // },\n      // {\n      //   id: 4,\n      //   title: 'bad shitty creepZ'\n      // }\n    ],\n    messages: [\n      {\n        id: 1,\n        sender: 'other',\n        text: 'hey there buddz'\n      },\n      {\n        id: 2,\n        sender: 'me',\n        text: 'brooh, been where??'\n      },\n      {\n        id: 3,\n        sender: 'other',\n        text: 'lundun bro'\n      },\n      {\n        id: 4,\n        sender: 'me',\n        text: 'welcome back, buddz'\n      }\n    ]\n  }\n\n  const [state, dispatch] = useReducer(StreamReducer, initialState)\n\n  const authContext = useContext(AuthContext)\n  const { user } = authContext\n\n  const getStream = async () => {\n    if (user) {\n      const res = await axios.get(`http://localhost:5000/streams/${user._id}`)\n      console.log('[get-stream]', res.data)\n      dispatch({\n        type: GET_STREAM,\n        payload: res.data\n      })\n    }\n  }\n\n  const selectStream = stream => {\n    dispatch({\n      type: CHOOSE_STREAM,\n      payload: stream\n    })\n  }\n\n  const sendMessage = formData => {\n    dispatch({\n      type: SEND_MESSAGE,\n      payload: formData\n    })\n  }\n\n  const createStream = async title => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n    if (user) {\n      const formData = {\n        title: title.title,\n        owner_id: user._id,\n        owner_name: user.name\n      }\n      console.log('[create stream]', formData)\n      const res = await axios.post('http://localhost:5000/streams/create', formData, config)\n      dispatch({\n        type: CREATE_STREAM,\n        payload: formData\n      })\n    }\n  }\n\n  const deleteStream = formData => {\n    dispatch({\n      type: DELETE_STREAM,\n      payload: formData\n    })\n  }\n\n  const updateStream = formData => {\n    dispatch({\n      type: UPDATE_STREAM,\n      payload: formData\n    })\n  }\n\n  return (\n    <StreamContext.Provider \n      value={{\n        streams: state.streams,\n        messages: state.messages,\n        current: state.current,\n        getStream,\n        sendMessage,\n        selectStream,\n        createStream,\n        deleteStream,\n        updateStream\n      }}\n    >\n      { props.children }\n    </StreamContext.Provider>\n  )\n}\n\nexport default StreamState"]},"metadata":{},"sourceType":"module"}