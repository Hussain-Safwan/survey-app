{"ast":null,"code":"var _jsxFileName = \"/home/mah-nigga/Projects/ifarmer/client/src/components/Survey.js\";\nimport React, { useState, useEffect } from 'react';\nimport '../assests/css/index.css';\nimport axios from 'axios';\nimport crypto from 'crypto-random-string';\n\nconst Survey = () => {\n  const [state, setState] = useState({\n    data: [],\n    index: 0,\n    end: false,\n    answers: []\n  });\n  const [submitButton, setSubmitButton] = useState({\n    disabled: false,\n    display: true\n  });\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const config = {\n      headers: {\n        'x-auth-token': localStorage.getItem('token')\n      }\n    };\n\n    if (state.data.length == 0) {\n      const data = axios.get('/api/v1/user/queries', config).then(res => {\n        const data = res.data;\n        let temp = { ...state\n        };\n        temp.data = data;\n        temp.answers = new Array(data.length).fill({\n          index: null,\n          type: null,\n          value: ''\n        });\n        setState(temp);\n      });\n    }\n  }, []);\n\n  const next = () => {\n    let temp = { ...state\n    };\n    temp.index++;\n\n    if (temp.index == temp.data.length - 1) {\n      temp.end = true;\n    }\n\n    setState(temp);\n  };\n\n  const previous = () => {\n    let temp = { ...state\n    };\n    temp.index--;\n    setState(temp);\n  };\n\n  const handleChanges = e => {\n    let temp = { ...state\n    };\n    temp.answers[state.index] = {\n      index: state.index,\n      type: state.data[state.index].type,\n      value: e.target.value\n    };\n    setState(temp);\n  };\n\n  const handleChecks = e => {\n    let checked = [];\n    const checkBoxes = document.getElementsByTagName('input');\n\n    for (let i = 0; i < checkBoxes.length; i++) {\n      if (checkBoxes[i].checked) {\n        checked.push(checkBoxes[i].value);\n      }\n    }\n\n    let temp = { ...state\n    };\n    temp.answers[state.index] = {\n      index: state.index,\n      type: state.data[state.index].type,\n      value: checked\n    };\n    setState(temp);\n  };\n\n  const submit = () => {\n    let temp = { ...submitButton\n    };\n    temp.disabled = true;\n    setSubmitButton(temp);\n    const user_id = crypto({\n      length: 6\n    });\n    const data = {\n      user_id,\n      answers: state.answers\n    };\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    axios.post('/api/v1/user/survey', data, config).then(res => {\n      let temp = { ...submitButton\n      };\n      temp.display = false;\n      setSubmitButton(temp);\n      setMsg(res.data.msg);\n    });\n  };\n\n  const RenderSwitch = () => {\n    const type = state.data[state.index].type;\n    const data = state.data[state.index];\n    let jsx = null;\n\n    switch (type) {\n      case 'free':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"free\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          name: data.question,\n          value: state.answers[state.index].value,\n          onChange: handleChanges,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }\n        }));\n\n      case 'scq':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"scq\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 11\n          }\n        }, data.options.map((option, i) => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"option\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"radio\",\n          key: data.question,\n          name: data.question,\n          id: option,\n          value: option,\n          onChange: handleChanges,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: option,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 37\n          }\n        }, option), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 37\n          }\n        }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 44\n          }\n        }))));\n\n      case 'mcq':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mcq\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }\n        }, data.options.map((option, i) => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"option\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          key: data.question,\n          name: data.question,\n          id: option,\n          value: option,\n          onChange: handleChecks,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: option,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 37\n          }\n        }, option), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 37\n          }\n        }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 44\n          }\n        }))));\n\n      default:\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 16\n          }\n        });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, state.data.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 36\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"question-space\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"question\",\n    id: \"question\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 23\n    }\n  }, state.data[state.index].question))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"answer-space\",\n    id: \"answer-space\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, RenderSwitch()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: next,\n    disabled: state.index == state.data.length - 1 ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 49\n    }\n  }, \"Next\"))))), state.end ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"final\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"texts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, \"You've reached the end of the survey. Thanks for the patience!\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submit,\n    disabled: submitButton.disabled,\n    style: {\n      display: submitButton.display ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, \"Submit\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }), msg == null ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"texts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 36\n    }\n  }, msg))) : null));\n};\n\nexport default Survey;","map":{"version":3,"sources":["/home/mah-nigga/Projects/ifarmer/client/src/components/Survey.js"],"names":["React","useState","useEffect","axios","crypto","Survey","state","setState","data","index","end","answers","submitButton","setSubmitButton","disabled","display","msg","setMsg","config","headers","localStorage","getItem","length","get","then","res","temp","Array","fill","type","value","next","previous","handleChanges","e","target","handleChecks","checked","checkBoxes","document","getElementsByTagName","i","push","submit","user_id","post","RenderSwitch","jsx","question","options","map","option"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport '../assests/css/index.css'\nimport axios from 'axios'\nimport crypto from 'crypto-random-string'\n\nconst Survey = () => {\n\n  const [state, setState] = useState({\n    data: [],\n    index: 0,\n    end: false,\n    answers: []\n  })\n  const [submitButton, setSubmitButton] = useState({\n    disabled: false,\n    display: true\n  })\n  const [msg, setMsg] = useState(null)\n\n  useEffect(() => {\n    const config = {\n      headers: {\n        'x-auth-token': localStorage.getItem('token'),\n      },\n    };\n    \n    if (state.data.length == 0) {\n      const data = axios.get('/api/v1/user/queries', config).then(res => {\n        const data = res.data\n        let temp = {...state}\n        temp.data = data\n        temp.answers = new Array(data.length).fill({\n          index: null,\n          type: null,\n          value: ''\n        })\n        setState(temp)\n      })\n    }\n  }, [])\n\n  const next = () => {\n    let temp = { ...state }\n    temp.index++\n    if (temp.index == temp.data.length-1) {\n      temp.end = true\n    }\n    setState(temp)\n  }\n  const previous = () => {\n    let temp = { ...state }\n    temp.index--\n    setState(temp)\n  }\n\n  const handleChanges = e => {\n    let temp = { ...state }\n    temp.answers[state.index] = {\n      index: state.index,\n      type: state.data[state.index].type,\n      value: e.target.value\n    }\n    setState(temp)\n  }\n\n  const handleChecks = e => {\n    let checked = []\n    const checkBoxes = document.getElementsByTagName('input')\n    for (let i=0; i<checkBoxes.length; i++) {\n      if (checkBoxes[i].checked) {\n        checked.push(checkBoxes[i].value)\n      }\n    }\n    let temp = { ...state }\n    temp.answers[state.index] = {\n      index: state.index,\n      type: state.data[state.index].type,\n      value: checked\n    }\n    setState(temp)\n  }\n\n  const submit = () => {\n    let temp = { ...submitButton }\n    temp.disabled = true\n    setSubmitButton(temp)\n\n    const user_id = crypto({ length: 6 })\n    const data = {\n      user_id,\n      answers: state.answers\n    }\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n    axios.post('/api/v1/user/survey', data, config).then(res => {\n      let temp = { ...submitButton }\n      temp.display = false\n      setSubmitButton(temp)\n      setMsg(res.data.msg)\n    })\n  } \n\n  const RenderSwitch = () => {\n    const type = state.data[state.index].type\n    const data = state.data[state.index]\n    let jsx = null\n    switch (type) {\n      case 'free' : \n       return (\n        <div className=\"free\">\n          <input type=\"text\" name={data.question} value={state.answers[state.index].value} onChange={handleChanges} />\n        </div>\n       )\n      case 'scq' : \n        return (\n          <div className=\"scq\">\n                            {\n                              data.options.map((option, i) => (\n                                <div className=\"option\">\n                                    <input \n                                    type=\"radio\" \n                                    key={data.question} \n                                    name={data.question} \n                                    id={option} \n                                    value={option}\n                                    onChange={handleChanges}\n                                    />\n                                    <label htmlFor={option}>{option}</label>\n                                    <br /> <br />\n                                </div> \n                              ))\n                            }\n                        </div>\n        )\n      case 'mcq' :\n        return (\n          <div className=\"mcq\">\n                            {\n                              data.options.map((option, i) => (\n                                <div className=\"option\">\n                                    <input type=\"checkbox\" key={data.question} name={data.question} id={option} value={option} onChange={handleChecks}/>\n                                    <label htmlFor={option}>{option}</label>\n                                    <br /> <br />\n                                </div> \n                              ))\n                            }\n                        </div>\n        )\n      default: \n        return <div></div>\n    }\n  }\n\n  return (\n    <div className=\"page-wrapper\">\n    <div className=\"content-wrapper\">\n        {\n          state.data.length == 0 ? <div></div> : (\n            <div className=\"box\">\n              <div className=\"question-space\">\n                  <div className=\"question\" id=\"question\">\n                      <p>{state.data[state.index].question}</p>\n                  </div>\n              </div>\n              <div className=\"answer-space\" id=\"answer-space\">\n                {RenderSwitch()}\n              </div>\n              <div className=\"footer\">\n                  <div className=\"buttons\">\n                      <div className=\"btn-right\">\n                        {/* <button onClick={previous} disabled={state.index == 0 ? true : false}>Previous</button> */}\n                        </div>\n                      <div className=\"btn-left\"><button onClick={next} disabled={state.index == state.data.length-1 ? true:false}>Next</button></div>\n                  </div>\n              </div>\n          </div>\n          )\n        }\n        \n        {\n          state.end ? <div className='final'>\n          <p>\n            <div className='texts'>You've reached the end of the survey. Thanks for the patience!</div>\n            <br/>\n            <div>\n              <button \n              onClick={submit} \n              disabled={submitButton.disabled} \n              style={{display: submitButton.display ? '' : 'none'}} \n              >\n                Submit\n              </button>\n              </div>\n            <br />\n            { msg == null ? null : <div className='texts'>{msg}</div> }\n          </p>\n        </div> : null\n        }\n    </div>\n</div>\n  )\n}\n\nexport default Survey\n"]},"metadata":{},"sourceType":"module"}